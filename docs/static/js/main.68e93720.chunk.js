(this["webpackJsonpreact-sqljs-demo"]=this["webpackJsonpreact-sqljs-demo"]||[]).push([[0],{125:function(e,t,n){},131:function(e,t){},133:function(e,t){},144:function(e,t){},146:function(e,t){},173:function(e,t){},175:function(e,t){},176:function(e,t){},181:function(e,t){},183:function(e,t){},189:function(e,t){},191:function(e,t){},210:function(e,t){},222:function(e,t){},225:function(e,t){},235:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n.n(r),i=n(114),o=n.n(i),l=n(115),c=n(11),s=n(58),u=n.n(s),d=(n(125),n(116)),p=n.n(d),f=n(117),b=n.n(f),x=n.p+"static/media/database.7a2f0e9f.bin",m=n(118),_=n(59),h=n.n(_),j=n(119),g=n.n(j);n(233);function v(e){var t=document.getElementById(e).offsetTop,n=function(e,t,n){if("object"!==typeof e)throw new TypeError("Arguement config expect an Object");var r,a,i=e.start,o=$.extend({},i),l=$.extend({},i),c=e.end,s=e.duration||1e3;function u(e,t,n,r){return[(t-r)/(e-n),(e*r-t*n)/(e-n)]}function d(e,t){return t*l[e][0]+l[e][1]}function p(){var e=Date.now(),r=c;if(e<a){for(var i in r=o,o)o[i]=d(i,e);t(r),requestAnimationFrame(p)}else t(r),n&&n()}return function(){for(var e in r=Date.now(),a=r+s,l)l[e]=u(r,i[e],a,c[e]);p()}}({start:[0,0],end:[document.getElementById(e).offsetLeft,t],duration:1e3},(function(e){console.log(arguments),window.scrollTo(e[0],e[1])}));n()}var O=n(2),y=[{value:"main_checklist",label:"Filter:",children:[{value:"supported_model_checklist",label:"I need to explain specific AI model(s):",children:[{value:"supported_model_model_agnostic",label:"Any (Model agnostic xAI alg.)",sql:"xai.supported_model_model_agnostic = 1"},{value:"supported_model_tree_based",label:"Tree-based",sql:"xai.supported_model_tree_based = 1"},{value:"supported_model_neural_network",label:"Neural Network",sql:"xai.supported_model_neural_network = 1"}]},{value:"required_output_checklist",label:"I need specific output(s) from the XAI:",children:[{value:"output_importance",label:"Feature importance (Global Explanation)",sql:"xai.output_importance = 1"},{value:"output_attribution",label:"Feature attribution (Local Explanation)",sql:"xai.output_attribution = 1"},{value:"output_interaction",label:"Pair feature interaction (Global Explanation)",sql:"xai.output_interaction = 1"},{value:"todo1",label:"#Future work: Pair interaction (Local Ex), multi F interaction, NLP, debugging ...",disabled:!0}]},{value:"required_input_data_",label:"Check if we can NOT provide the following information to the xAI algorithm:",children:[{value:"required_input_X_reference",label:"A reference input data",sql:"xai.required_input_X_reference = 0"},{value:"required_input_truth_to_explain",label:"Target values of the data points to explain (truth, not prediction)",sql:"xai.required_input_truth_to_explain = 0"}]},{value:"explainer_input_xai_",label:"Check if we can NOT execute the following operations on the AI model:",children:[{value:"required_input_predict_func",label:"Perform addional predictions.",sql:"xai.required_input_predict_func = 0"},{value:"required_input_train_function",label:"#Future work: Retrain the model.",disabled:!0}]},{value:"test_adversarial_attacks",label:"I trust the xAI output (I created the data and the model myself)",sql:"t.category != 'fragility'"},{value:"assumptions_data_distribution_iid",label:"#Future work: Assume input features to be independent and identically distributed",disabled:!0},{value:"explainer_need_gpu",label:"#Future work: Constraint on hardware equipement: xAI alg. require a GPU.",disabled:!0}]}],w={};!function e(t,n){t.map((function(e){"sql"in e&&(n[e.value]=e.sql)})),t.map((function(t){"children"in t&&e(t.children,n)}))}(y,w),window.location.href.includes("localhost")&&console.log("localhost");var A=["fidelity","fragility","stability","simplicity","stress"],k=A.map((function(e){return" ROUND(AVG(case category when '"+e+"' then score end)*100.0,1) AS percentage_"+e})).join(",\n ");function q(){var e=Object(r.useState)(null),t=Object(c.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(null),o=Object(c.a)(i,2),s=o[0],d=o[1];return Object(r.useEffect)(Object(l.a)(u.a.mark((function e(){var t,n,r,i,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=p()({locateFile:function(){return m.a}}),n=fetch(x).then((function(e){return e.arrayBuffer()})).catch((function(e){console.log("File not found:"),console.log(e)})),e.next=5,Promise.all([t,n]);case 5:r=e.sent,i=Object(c.a)(r,2),o=i[0],l=i[1],console.log("sql ok."),a(new o.Database(new Uint8Array(l))),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("sql error:"),d(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),[]),s?Object(O.jsx)("pre",{children:s.toString()}):n?Object(O.jsx)(F,{db:n}):Object(O.jsx)("pre",{children:"Loading..."})}function S(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=n;return t}var N=function(e,t){return e.map((function(e){return e[t]}))},I=function(e,t){return e.map((function(e){return function(e){for(var t=null,n=null,r=0;r<e.length;r++)e[r]&&(t++,n+=e[r]);if(t)var a=Number(n/t);else a=null;return a}(A.map((function(n){return e[t["percentage_"+n]]})))}))};function E(e,t){var n=t.filter((function(e){return e in w})).map((function(e){return w[e]})).join(" AND ");n.length>0&&(n="Where "+n+" \n");var r="\n  -- For Plotly\n  SELECT\tc.explainer,\nROUND(AVG(c.time),2) AS time_per_test,\ncount(c.score) AS eligible_points,\n"+k+" \nFROM cross_tab AS c\nLeft JOIN test AS t ON c.test = t.test\nLeft JOIN explainer AS xai ON c.explainer = xai.explainer\n"+n+" \nGROUP BY c.explainer;\n\n-- details about the selected explainer\nSELECT\tdescription, p.source_paper_bibliography, source_code, supported_models, outputs, required_input_data\nFROM explainer AS xai\nLeft JOIN paper AS p ON xai.source_paper_tag = p.source_paper_tag\nWhere (explainer = '"+e+"');\n\n-- detailed scoring of the selected explainer\nSELECT\tcategory AS test_category, test.test, subtest, ROUND(score,2), ROUND(time),\ntest.description AS test_description\nFROM cross_tab\nLeft JOIN test ON cross_tab.test = test.test\nWhere (explainer = '"+e+"') and (score IS NOT NULL)\nOrder By test_category, test_subtest;\n";return console.log(r),r}function F(e){var t,n=e.db,a=Object(r.useState)("kernel_shap"),i=Object(c.a)(a,2),o=i[0],l=i[1],s=Object(r.useState)(["output_importance"]),u=Object(c.a)(s,2),d=u[0],p=u[1],f=Object(r.useState)([]),x=Object(c.a)(f,2),m=x[0],_=x[1],j=Object(r.useState)(n.exec(E(o,d))),w=Object(c.a)(j,2),k=w[0],q=w[1],F=Object(r.useState)(null),T=Object(c.a)(F,2),R=T[0],C=T[1];console.log("checked",d),console.log("passed explainer",o),console.log(k),console.log(R);var P=S((t=k[0]).columns),U=I(t.values,P),B=N(t.values,P.time_per_test),D=N(t.values,P.eligible_points),G=N(t.values,P.explainer);console.log(t);for(var J=[],M=0;M<B.length;M++)J.push([U[M],B[M]]);var W=b.a.getParetoFrontier(J,{optimize:"bottomRight"}),X=[{x:B,y:U,mode:"markers+text",type:"scatter",name:"Explainers",text:G,textposition:"top center",textfont:{family:"Raleway, sans-serif"},marker:{size:D}},{x:N(W,1),y:N(W,0),mode:"lines",type:"scatter",name:"Pareto front",textfont:{family:"Times New Roman"},textposition:"bottom center"}],z=k[1],V=S(z.columns),$=t.values.filter((function(e){return e[P.explainer]==o})),H=A.map((function(e){return $[0][P["percentage_"+e]]})),K=[{type:"bar",x:H,y:A,text:H,orientation:"h"}];return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("pre",{className:"error",children:(R||"").toString()}),Object(O.jsx)(h.a,{data:X,layout:{xaxis:{type:"log",autorange:!0,title:{text:"Average Time per test [Seconds] \u2193"}},yaxis:{title:{text:"Score [%] \u2191"}},legend:{y:1,yref:"paper",font:{family:"Arial, sans-serif"}},title:"Global overview of the explainers' performance<br><b>Tip</b>: Click on an explainer for more details"},onClick:function(e){console.log("plotly_click:"),console.log(e),console.log(e.points);var t=e.points[0].text;l(t),v("explainer_title")},onHover:function(e){return document.getElementsByClassName("nsewdrag")[0].style.cursor="pointer"},onUnhover:function(e){return document.getElementsByClassName("nsewdrag")[0].style.cursor=""},divId:"fig"}),Object(O.jsx)("pre",{children:Object(O.jsx)(g.a,{nodes:y,checked:d,expanded:m,onCheck:function(e){!function(e){try{q(n.exec(e)),C(null)}catch(t){C(t),q([])}}(E(o,e)),p(e)},onExpand:function(e){return _(e)},showExpandAll:!0})}),Object(O.jsx)("pre",{children:Object(O.jsx)(L,{columns:k[0].columns,values:k[0].values},0)}),Object(O.jsxs)("h1",{id:"explainer_title",children:[o," Explainer:"]}),Object(O.jsx)("div",{children:z.columns.map((function(e,t){return Object(O.jsxs)("pre",{id:"{key}",children:[Object(O.jsxs)("b",{children:[e,":"]})," ",z.values[0][V[e]]]})}))}),Object(O.jsx)(h.a,{data:K,layout:{title:"Score per category",font:{family:"Raleway, sans-serif"},showlegend:!1,xaxis:{tickangle:-45},yaxis:{gridwidth:2},bargap:.05},divId:"explainer_fig"}),Object(O.jsx)("h2",{children:"Score per test:"}),Object(O.jsx)("pre",{children:Object(O.jsx)(L,{columns:k[2].columns,values:k[2].values},2)}),Object(O.jsxs)("pre",{children:[" Want to learn more about a specific test? ",Object(O.jsx)("a",{href:"https://github.com/Karim-53/Compare-xAI/blob/main/data/01_raw/test.csv",children:"check the full list here"})]})]})}function L(e){var t=e.columns,n=e.values;return Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsx)("tr",{children:t.map((function(e,t){return Object(O.jsx)("td",{children:e},t)}))})}),Object(O.jsx)("tbody",{children:n.map((function(e,t){return Object(O.jsx)("tr",{children:e.map((function(e,t){return Object(O.jsx)("td",{children:e},t)}))},t)}))})]})}var T=document.getElementById("root");o.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(q,{})}),T)}},[[235,1,2]]]);
//# sourceMappingURL=main.68e93720.chunk.js.map