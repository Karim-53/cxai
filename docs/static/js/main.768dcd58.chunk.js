(this["webpackJsonpreact-sqljs-demo"]=this["webpackJsonpreact-sqljs-demo"]||[]).push([[0],{125:function(e,t,n){},131:function(e,t){},133:function(e,t){},144:function(e,t){},146:function(e,t){},173:function(e,t){},175:function(e,t){},176:function(e,t){},181:function(e,t){},183:function(e,t){},189:function(e,t){},191:function(e,t){},210:function(e,t){},222:function(e,t){},225:function(e,t){},235:function(e,t,n){"use strict";n.r(t);var i=n(6),r=n.n(i),a=n(114),s=n.n(a),o=n(115),l=n(11),c=n(58),u=n.n(c),d=(n(125),n(116)),p=n.n(d),b=n(117),h=n.n(b),x=n.p+"static/media/database.88820a9c.bin",f=n(118),j=n(59),m=n.n(j),_=n(119),g=n.n(_);n(233);function O(e){var t=document.getElementById(e).offsetTop;(function(e,t,n){if("object"!==typeof e)throw new TypeError("Arguement config expect an Object");var i,r,a=e.start,s=$.extend({},a),o=$.extend({},a),l=e.end,c=e.duration||1e3;function u(e,t,n,i){return[(t-i)/(e-n),(e*i-t*n)/(e-n)]}function d(e,t){return t*o[e][0]+o[e][1]}function p(){var e=Date.now(),i=l;if(e<r){for(var a in i=s,s)s[a]=d(a,e);t(i),requestAnimationFrame(p)}else t(i),n&&n()}return function(){for(var e in i=Date.now(),r=i+c,o)o[e]=u(i,a[e],r,l[e]);p()}})({start:[0,0],end:[document.getElementById(e).offsetLeft,t],duration:1e3},(function(e){window.scrollTo(e[0],e[1])}))()}var v=n(0),y=[{value:"main_checklist",label:"Filters:",showCheckbox:!1,children:[{value:"supported_model_checklist",label:"I need to explain specific AI model(s):",children:[{value:"supported_model_model_agnostic",label:"Any (Model agnostic xAI alg.)",sql:"xai.supported_model_model_agnostic = 1"},{value:"supported_model_tree_based",label:"Tree-based",sql:"xai.supported_model_tree_based = 1"},{value:"supported_model_neural_network",label:"Neural Network",sql:"xai.supported_model_neural_network = 1"}]},{value:"required_output_checklist",label:"I need specific output(s) from the XAI:",children:[{value:"output_importance",label:"Feature importance (Global Explanation)",sql:"xai.output_importance = 1"},{value:"output_attribution",label:"Feature attribution (Local Explanation)",sql:"xai.output_attribution = 1"},{value:"output_interaction",label:"Pair feature interaction (Under development)",sql:"xai.output_interaction = 1"}]},{value:"required_input_data_",label:"Check if we can NOT provide the following information to the xAI algorithm:",children:[{value:"required_input_X_reference",label:"A reference input data",sql:"xai.required_input_X_reference = 0"},{value:"required_input_truth_to_explain",label:"Target values of the data points to explain (i.e. truth, not prediction)",sql:"xai.required_input_truth_to_explain = 0"}]},{value:"explainer_input_xai_",label:"Check if we can NOT execute the following operations on the AI model:",children:[{value:"required_input_predict_func",label:"Perform addional predictions.",sql:"xai.required_input_predict_func = 0"}]},{value:"test_adversarial_attacks",label:"I trust the xAI output (I created the data and the model myself)",sql:"t.category != 'fragility'"}]}],A={};!function e(t,n){t.map((function(e){"sql"in e&&(n[e.value]=e.sql)})),t.map((function(t){"children"in t&&e(t.children,n)}))}(y,A);var S=["fidelity","fragility","stability","simplicity","stress"],w={fidelity:"Test if the xAI output reflects the underlying model.",fragility:"Test if the xAI output is easily manipulable on purpose.",stability:"Test if the xAI output is too sensitive to slight changes in the dataset/model.",simplicity:"Users should be able to look at the explanation, and reason about model behavior.",stress:"Test if the xAI can explain models trained on big data."},I=S.map((function(e){return" ROUND(AVG(case category when '"+e+"' then score end)*100.0,1) AS percentage_"+e})).join(",\n "),N={explainer:"Explainer",time_per_test:"Average time per test",eligible_points:"Number of completed tests",percentage_fidelity:"Fidelity [%]",percentage_fragility:"Fragility [%]",percentage_stability:"Stability [%]",percentage_simplicity:"Simplicity [%]",percentage_stress:"Stress test [%]"};function k(){var e=Object(i.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(null),s=Object(l.a)(a,2),c=s[0],d=s[1];return Object(i.useEffect)(Object(o.a)(u.a.mark((function e(){var t,n,i,a,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=p()({locateFile:function(){return f.a}}),n=fetch(x).then((function(e){return e.arrayBuffer()})).catch((function(e){console.log("File not found:"),console.log(e)})),e.next=5,Promise.all([t,n]);case 5:i=e.sent,a=Object(l.a)(i,2),s=a[0],o=a[1],console.log("sql ok."),r(new s.Database(new Uint8Array(o))),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("sql error:"),d(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),[]),c?Object(v.jsx)("pre",{children:c.toString()}):n?Object(v.jsx)(L,{db:n}):Object(v.jsx)("pre",{children:"Loading..."})}function T(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=n;return t}var E=function(e,t){return e.map((function(e){return e[t]}))},q=function(e,t){return e.map((function(e){return function(e){for(var t=null,n=null,i=0;i<e.length;i++)e[i]&&(t++,n+=e[i]);if(t)var r=Number(n/t);else r=null;return r}(S.map((function(n){return e[t["percentage_"+n]]})))}))};function F(e,t){var n=t.filter((function(e){return e in A})).map((function(e){return A[e]})).join(" AND ");return n.length>0&&(n="Where "+n+" \n"),"\n--0 For Plotly\nSELECT\tc.explainer,\n--ROUND(AVG(c.time),2) AS time_per_test,\nxai.time_per_test as time_per_test,\ncount(c.score) AS eligible_points,\n"+I+" \nFROM cross_tab AS c\nLeft JOIN test AS t ON c.test = t.test\nLeft JOIN explainer AS xai ON c.explainer = xai.explainer\n"+n+" \nGROUP BY c.explainer;\n\n--1 details about the selected explainer\nSELECT\tdescription AS 'xAI description',\n        supported_models AS 'Supported AI models',\n        outputs AS 'xAI outputs',\n        required_input_data AS 'Required info by the xAI',\n        p.source_paper_bibliography AS 'Original paper',\n        source_code AS 'Source code'\nFROM explainer AS xai\nLeft JOIN paper AS p ON xai.source_paper_tag = p.source_paper_tag\nWhere (explainer = '"+e+"');\n\n--2 detailed scoring of the selected explainer\nSELECT\ttest.short_description AS '  ______Short_description______  ',\nROUND(score,2) AS Score, category AS 'test category',\ntested_xai_output AS 'Tested_xAI_output________'\n--  test.test, subtest no ROUND(time) to make things readable\nFROM cross_tab\nLeft JOIN test ON cross_tab.test = test.test\nWhere (explainer = '"+e+"') and (score IS NOT NULL)\nOrder By Score;\n-- order also by 'test category' test_subtest, 'Tested_xAI_output________';\n\n--3 Kept Unit tests\nSELECT\tcount(DISTINCT c.test_subtest) AS kept_tests\nFROM cross_tab AS c\nLeft JOIN test AS t ON c.test = t.test\nLeft JOIN explainer AS xai ON c.explainer = xai.explainer\n"+n+";\n\n--4 total xAi and tests\nSELECT\tcount(DISTINCT c.test_subtest) AS total_eligible_points,\n    \tcount(DISTINCT c.explainer) AS total_explainers\nFROM cross_tab AS c;\n"}function L(e){var t,n=e.db,r=Object(i.useState)("kernel_shap"),a=Object(l.a)(r,2),s=a[0],o=a[1],c=Object(i.useState)(["output_importance"]),u=Object(l.a)(c,2),d=u[0],p=u[1],b=Object(i.useState)(["main_checklist"]),x=Object(l.a)(b,2),f=x[0],j=x[1],_=Object(i.useState)(n.exec(F(s,d))),A=Object(l.a)(_,2),I=A[0],k=A[1],L=Object(i.useState)(null),R=Object(l.a)(L,2),U=R[0],D=R[1];for(var B=T((t=I[0]).columns),P=q(t.values,B),J=E(t.values,B.time_per_test),M=E(t.values,B.eligible_points),G=E(t.values,B.explainer),W=t.values.length,z=I[3].values[0][0],X=I[4].values[0][0],H=I[4].values[0][1],K=[],V=0;V<J.length;V++)K.push([P[V],J[V]]);var $=h.a.getParetoFrontier(K,{optimize:"bottomRight"}),Y=E($,1),Q=E($,0),Z=[{x:J,y:P,mode:"markers+text",type:"scatter",name:"Explainers",text:G,textposition:"top center",textfont:{family:"Raleway, sans-serif"},marker:{size:M.map((function(e){return 2*e}))}},{x:Y,y:Q,mode:"lines",type:"scatter",name:"Pareto front",textfont:{family:"Times New Roman"},textposition:"bottom center"}],ee=I[1],te=T(ee.columns),ne=t.values.filter((function(e){return e[B.explainer]==s})),ie=ne.length>0?S.map((function(e){return ne[0][B["percentage_"+e]]})):S.map((function(e){return null})),re=ne.length>0?"":"With the applied filters, none of remaining unit tests could be applied on this explainer,\n  please select another one by clicking on a blue dot in the first figure.",ae=[{type:"bar",x:ie.slice().reverse(),y:S.slice().reverse(),text:ie.slice().reverse(),hovertext:S.slice().reverse().map((function(e){return w[e]})),hovertemplate:"<b>Sub-category</b>: %{y}<br><b>Sub-score</b>: %{x:.2f}<br><b>Sub-category definition</b>:%{hovertext}</b><extra></extra>",orientation:"h"}],se=W<=1?"None of the indexed xAI satisfy the selected constrains. Please use less filters.":"",oe="https://arxiv.org/";return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)("pre",{className:"error",children:(U||"").toString()}),Object(v.jsx)("h2",{id:"Filters",className:"content-subhead",children:"1. shortlist xAI that fits your needs:"}),Object(v.jsx)("pre",{children:"Use the filters below to describe the xAI model and the dataset you would like to explain."}),Object(v.jsx)("pre",{children:Object(v.jsx)(g.a,{nodes:y,checked:d,expanded:f,onCheck:function(e){!function(e){try{k(n.exec(e)),D(null)}catch(t){D(t),k([])}}(F(s,e)),p(e)},onExpand:function(e){return j(e)},showExpandAll:!0})}),Object(v.jsxs)("pre",{children:["Using the selected filters, we keep ",Object(v.jsxs)("b",{children:[" ",W," xAI tool(s) out of ",H]})," and ",Object(v.jsxs)("b",{children:[z," unit test(s) out of ",X]}),".   "]}),Object(v.jsx)("pre",{className:"error",children:(se||"").toString()}),Object(v.jsxs)("pre",{children:["Below, we test every xAI on these ",z," unit test(s). Every unit test evaluates a specific aspect of the xAI algorithm (the ",Object(v.jsx)("b",{children:"fidelity"})," of the explanation to the AI behavior, the ",Object(v.jsx)("b",{children:"stability"})," of the xAI against minor changes in the AI, etc.). ",Object(v.jsx)("a",{href:oe,children:"Learn more about implemented unit tests and how the selection was done."})]}),Object(v.jsx)("h2",{id:"Overview_Plot",className:"content-subhead",children:"2. Evaluate selected xAI using an intuitive scoring method:"}),Object(v.jsx)(m.a,{data:Z,layout:{width:900,height:580,margin:{t:40,pad:0},xaxis:{type:"log",autorange:!0,title:{text:"Fast alg. <--     Average Time per test [Seconds] \u2193     --\x3e Slow alg."}},yaxis:{range:[1,100],title:{text:"Poor <--  Average Score per test [%] \u2191  --\x3e Excelent"}},legend:{tracegroupgap:20,y:1,yref:"paper",font:{family:"Arial, sans-serif"}},annotations:[{x:.01,y:100,xref:"paper",yref:"y",text:"Best xAI(s) are close to this point",showarrow:!0,arrowhead:7,ax:15,ay:-35,font:{color:"#636363"},arrowcolor:"#636363"}]},onClick:function(e){console.log("plotly_click:"),console.log(e),console.log(e.points);var t=e.points[0].text;o(t);try{O("Explainer_details")}catch(U){console.error(U)}},onHover:function(e){return document.getElementsByClassName("nsewdrag")[0].style.cursor="pointer"},onUnhover:function(e){return document.getElementsByClassName("nsewdrag")[0].style.cursor=""},divId:"fig"}),Object(v.jsxs)("pre",{className:"fig_title",children:[Object(v.jsx)("b",{children:"Figure 1:"}),": Global overview of the explainers' performance.",Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Tip"}),": Click on an explainer for more details."]}),Object(v.jsxs)("pre",{children:["The bubble plot (",Object(v.jsx)("b",{children:"Figure 1"}),") summarizes the average performance of the selected xAI(s): time on x-axis v.s. score in percentage on the y-axis. A perfect xAI should obtain a score of 100% and finish all ",z," tests in the smallest amount of time. Therefore, it would be located on the top right.",Object(v.jsx)("br",{}),"Moreover, some xAI might break while running, because of algorithmic/implementation issues. The dot size represents the number of tests completed without failure. Thus, higher portability is described with a bigger dot. ",Object(v.jsx)("a",{href:oe,target:"_blank",children:"Learn more about the overview plot."})]}),Object(v.jsxs)("pre",{children:[" An xAI can obtain a good average score but it might completely fail in a specific category of tests. ",Object(v.jsx)("b",{children:"Table 1"})," contains a more detailed scoring method by subdividing the score into ",S.length," categories:",Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Fidelity"}),":     ",w.fidelity,Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Fragility"}),":     ",w.fragility,Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Stability"}),":     ",w.stability,Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Simplicity"}),":     ",w.simplicity,Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:"Stress tests"}),":     ",w.stress,Object(v.jsx)("br",{}),Object(v.jsx)("a",{href:oe,target:"_blank",children:"See our paper for more details."})]}),Object(v.jsxs)("pre",{children:[Object(v.jsxs)("pre",{className:"fig_title",children:[Object(v.jsx)("b",{children:"Table 1:"})," Subscores given the selected filters."]}),Object(v.jsx)(C,{columns:I[0].columns.map((function(e){return N[e]})),values:I[0].values})]}),Object(v.jsx)("pre",{children:"Subscores change with the selected list of tests. Unselect all filters to have a global evaluation of the xAI or select the appropriate ones to obtain an evaluation of the use case of your need."}),Object(v.jsx)("pre",{})," ",Object(v.jsxs)("h2",{id:"Explainer_details",className:"content-subhead",children:["3. ",s," Explainer: Details"]}),Object(v.jsx)("pre",{children:"Select one specific Explainer by clicking on a blue dot in Figure 1. Below you can find a helpful description of the explainer and its specific requirements."}),Object(v.jsx)("div",{children:ee.columns.map((function(e,t){return Object(v.jsxs)("pre",{children:[Object(v.jsxs)("b",{children:[e,":"]})," ",ee.values[0][te[e]]]})}))}),Object(v.jsx)("pre",{className:"error",children:(re||"").toString()}),Object(v.jsx)(m.a,{data:ae,layout:{height:320,font:{family:"Raleway, sans-serif"},showlegend:!1,xaxis:{tickangle:-45,range:[1,100],title:{text:"Score [%] \u2191"}},yaxis:{gridwidth:2,title:{text:"Sub scoring categories"}},bargap:.05},divId:"explainer_fig"}),Object(v.jsxs)("pre",{className:"fig_title",children:[Object(v.jsx)("b",{children:"Figure 2"}),": Score of ",Object(v.jsxs)("b",{children:[s," Explainer"]})," per category."]}),Object(v.jsxs)("h2",{id:"Explainer_limits",className:"content-subhead",children:["4. ",s," Explainer: Limits of the interpretability of its output"]}),Object(v.jsxs)("pre",{children:[Object(v.jsx)("b",{children:"Table 2"})," gives the most detailed scoring. Here you will learn when exactly ",s," fails in explaining a model. The table is sorted by score (increasing) so you just need to look at the few first tests with a score below 80%. Want to learn how to deal with the limitations of the ",s," explainer? ",Object(v.jsx)("a",{href:"https://github.com/Karim-53/Compare-xAI/blob/main/data/01_raw/test.csv",target:"_blank",children:"See the workaround solution for each test here!"})]}),Object(v.jsxs)("pre",{children:[Object(v.jsxs)("pre",{className:"fig_title",children:[Object(v.jsx)("b",{children:"Table 2:"})," Score obtained by ",Object(v.jsxs)("b",{children:[s," explainer"]})," for each test."]}),Object(v.jsx)(C,{columns:I[2].columns,values:I[2].values})]}),Object(v.jsx)("pre",{children:"Table 2 is limited to the selected list of tests after filtering. Unselect all filters to have a global evaluation of the xAI or select the appropriate ones to obtain an evaluation of the use case of your need."})]})}function C(e){var t=e.columns,n=e.values;return Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsx)("tr",{children:t.map((function(e,t){return Object(v.jsx)("td",{children:e},t)}))})}),Object(v.jsx)("tbody",{children:n.map((function(e,t){return Object(v.jsx)("tr",{children:e.map((function(e,t){return Object(v.jsx)("td",{children:e},t)}))},t)}))})]})}var R=document.getElementById("root");s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(k,{})}),R)}},[[235,1,2]]]);
//# sourceMappingURL=main.768dcd58.chunk.js.map