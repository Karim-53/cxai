(this["webpackJsonpreact-sqljs-demo"]=this["webpackJsonpreact-sqljs-demo"]||[]).push([[0],{125:function(e,t,n){},131:function(e,t){},133:function(e,t){},144:function(e,t){},146:function(e,t){},173:function(e,t){},175:function(e,t){},176:function(e,t){},181:function(e,t){},183:function(e,t){},189:function(e,t){},191:function(e,t){},210:function(e,t){},222:function(e,t){},225:function(e,t){},235:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),o=n(113),i=n.n(o),l=n(114),c=n(11),s=n(58),u=n.n(s),d=(n(125),n(115)),p=n.n(d),b=n(116),f=n.n(b),x=n.p+"static/media/database.40437442.bin",h=n(117),j=n(118),m=n.n(j),_=n(119),v=n.n(_),g=(n(233),n(2)),O=[{value:"supported_models_checklist",label:"I need to explain specific AI model(s):",children:[{value:"model_agnostic",label:"Any (Model agnostic xAI alg.)"},{value:"tree_based",label:"Tree-based"},{value:"neural_network",label:"Neural Network"}]},{value:"required_output_checklist",label:"I need specific output(s) from the XAI:",children:[{value:"output_importance",label:"Feature importance (Global Explanation)"},{value:"output_attribution",label:"Feature attribution (Local Explanation)"},{value:"output_interaction",label:"Pair feature interaction (Global Explanation)"},{value:"todo1",label:"#Future work: Pair interaction (Local Ex), multi F interaction, NLP, debugging ...",disabled:!0}]},{value:"required_input_data_",label:"Select if we can not provide the following information to the xAI algorithm:",children:[{value:"required_input_X_reference",label:"A reference input data"},{value:"required_input_truth_to_explain",label:"Target values of the data points to explain (truth, not prediction)"}]},{value:"explainer_input_xai_",label:"Select if we can not execute the following operations on the AI model:",children:[{value:"required_input_predict_func",label:"Perform addional predictions."},{value:"required_input_train_function",label:"#Future work: Retrain the model.",disabled:!0}]},{value:"test_adversarial_attacks",label:"I trust the xAI output (I created the data and the model myself)"},{value:"assumptions_data_distribution_iid",label:"#Future work: Assume input features to be independent and uniformly distributed",disabled:!0},{value:"explainer_need_gpu",label:"#Future work: Constraint on hardware equipement: xAI alg. require a GPU.",disabled:!0}];window.location.href.includes("localhost")&&console.log("localhost");var y=["fidelity","fragility","stability","simplicity","stress"].map((function(e){return" ROUND(AVG(case category when '"+e+"' then score end)*100.0,1) AS percentage_"+e})).join(",\n ");function w(){var e=Object(a.useState)(null),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(null),i=Object(c.a)(o,2),s=i[0],d=i[1];return Object(a.useEffect)(Object(l.a)(u.a.mark((function e(){var t,n,a,o,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=p()({locateFile:function(){return h.a}}),n=fetch(x).then((function(e){return e.arrayBuffer()})).catch((function(e){console.log("File not found:"),console.log(e)})),e.next=5,Promise.all([t,n]);case 5:a=e.sent,o=Object(c.a)(a,2),i=o[0],l=o[1],console.log("sql ok."),r(new i.Database(new Uint8Array(l))),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("sql error:"),d(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),[]),s?Object(g.jsx)("pre",{children:s.toString()}):n?Object(g.jsx)(N,{db:n}):Object(g.jsx)("pre",{children:"Loading..."})}var k=function(e,t){return e.map((function(e){return e[t]}))},S=function(e,t){return e.map((function(e){return function(e){for(var t=null,n=null,a=0;a<e.length;a++)e[a]&&(t++,n+=e[a]);if(t)var r=Number(n/t);else r=null;return r}([e[t.percentage_fidelity],e[t.percentage_stability]])}))};function A(e,t){var n="SELECT\texplainer,\nROUND(AVG(time),2) AS time_per_test,\ncount(score) AS eligible_points,\n"+y+" \nFROM cross_tab\nLeft JOIN test ON cross_tab.test = test.test\nGROUP BY explainer;\n\nSELECT\tcategory AS test_category, test.test, subtest, ROUND(score,2), ROUND(time),\ntest.description AS test_description\nFROM cross_tab\nLeft JOIN test ON cross_tab.test = test.test\nWhere (explainer = '"+e+"') and (score IS NOT NULL)\nOrder By test_category, test_subtest;\n";return console.log(n),n}function N(e){var t,n=e.db,r=Object(a.useState)("kernel_shap"),o=Object(c.a)(r,2),i=o[0],l=o[1],s=Object(a.useState)(["output_importance"]),u=Object(c.a)(s,2),d=u[0],p=u[1],b=Object(a.useState)([]),x=Object(c.a)(b,2),h=x[0],j=x[1],_=Object(a.useState)(n.exec(A(i))),y=Object(c.a)(_,2),w=y[0],N=y[1],E=Object(a.useState)(null),q=Object(c.a)(E,2),F=q[0],L=q[1];console.log(A(i)),console.log("checked",d),console.log("passed explainer",i),console.log(w);var R=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=n;return t}((t=w[0]).columns),P=S(t.values,R),T=k(t.values,R.time_per_test),U=k(t.values,R.eligible_points),C=k(t.values,R.explainer);console.log(t);for(var G=[],D=0;D<T.length;D++)G.push([P[D],T[D]]);var B=f.a.getParetoFrontier(G,{optimize:"bottomRight"}),J=[{x:T,y:P,mode:"markers+text",type:"scatter",name:"Explainers",text:C,textposition:"top center",textfont:{family:"Raleway, sans-serif"},marker:{size:U}},{x:k(B,1),y:k(B,0),mode:"lines",type:"scatter",name:"Pareto front",textfont:{family:"Times New Roman"},textposition:"bottom center"}];return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(m.a,{data:J,layout:{xaxis:{type:"log",autorange:!0,title:{text:"Average Time per test [Seconds] \u2193"}},yaxis:{title:{text:"Score [%] \u2191"}},legend:{y:1,yref:"paper",font:{family:"Arial, sans-serif"}},title:"Global overview of the explainers' performance"},onClick:function(e){console.log("plotly_click:"),console.log(e),console.log(e.points);var t=e.points[0].text;l(t)},divId:"fig"}),Object(g.jsx)("h1",{children:"Filters"}),Object(g.jsx)("pre",{children:Object(g.jsx)(v.a,{nodes:O,checked:d,expanded:h,onCheck:function(e){p(e)},onExpand:function(e){return j(e)},showExpandAll:!0})}),Object(g.jsx)("h1",{id:"explainer_title",children:"Click on an explainer for more details"}),Object(g.jsx)("textarea",{onChange:function(e){return function(e){try{N(n.exec(A(i))),L(null)}catch(t){L(t),N([])}}(e.target.value)},placeholder:"Enter some SQL. No inspiration ? Try \u201cselect sqlite_version()\u201d"}),Object(g.jsx)("pre",{className:"error",children:(F||"").toString()}),Object(g.jsx)("pre",{children:w.map((function(e,t){var n=e.columns,a=e.values;return Object(g.jsx)(I,{columns:n,values:a},t)}))})]})}function I(e){var t=e.columns,n=e.values;return Object(g.jsxs)("table",{children:[Object(g.jsx)("thead",{children:Object(g.jsx)("tr",{children:t.map((function(e,t){return Object(g.jsx)("td",{children:e},t)}))})}),Object(g.jsx)("tbody",{children:n.map((function(e,t){return Object(g.jsx)("tr",{children:e.map((function(e,t){return Object(g.jsx)("td",{children:e},t)}))},t)}))})]})}var E=document.getElementById("root");i.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(w,{})}),E)}},[[235,1,2]]]);
//# sourceMappingURL=main.dfd21795.chunk.js.map